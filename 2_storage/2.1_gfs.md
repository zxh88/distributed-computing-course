**简介**
基于大量普通机器构建的分布式文件存储系统，特别适合大文件(>100MB)的批量顺序读写，随机少量数据的查询性能较差，在google内部应用场景有两种：一是程序员分析处理数据，二是线上数据的批量处理

**接口**
create, write, append, delete, read

**架构**
<img src="" />


**数据读取流程**


**数据写入流程**


**数据一致性问题**
数据不一致包含两种情况：写入失败导致的数据不完整(包含垃圾数据)、chunkserver掉线导致的数据过期(stale replication)

客户端在写入时首选会把要写入的数据沿着一条精心挑选的网络管道传送到各个chunkserver上(不是并行的传到A，B，C上，而是沿着A->B->C这样的顺序传送)，在此期间拿到lease的chunkserver作为primary节点负责确定这些并发写入的顺序，
然后告诉其他replica都按这个顺序将暂时缓存在chunserver中的数据写入到chunk中，此时chunk处于一致但不确定的状态。假如在这个过程有一个chunk写入失败，primary会告诉客户端，数据写入失败，让客户端重新发起写入请求，但之前写入
的数据不会回滚撤销(会变为垃圾数据等待清理)，此时chunk处于不一致的状态，但客户端不会读到不一致的数据(不同客户端从不同的备份节点上读取并返回给用户的数据肯定是一致的)。
因为有checksum机制的存在，写入失败所产生的垃圾数据不会被返回给客户端。


**failover**


**性能**